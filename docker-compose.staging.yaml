# version: "3"
services:
    web:
        container_name: "portfolio-staging"
        image: ${APP_IMAGE}
        ports:
            - "4000:3000"
        env_file:
            - .env
        restart: "unless-stopped"

    nginx:
        image: nginx:latest
        container_name: nginx-proxy
        volumes:
        - ./nginx/conf.d:/etc/nginx/conf.d/
        - ./ssl:/etc/ssl
        - ./nginx/log:/var/log/nginx
        ports:
        - "80:80"
        depends_on:
        - web
        restart: unless-stopped